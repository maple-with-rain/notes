### 分析力学表述的优势

+ 脱离了力（本质上是一种能量的梯度）的概念，变为对能量场（标量）的考虑，方便考虑复杂场中粒子运动
+ 分析力学将一个广义的力学系统的几乎所有力学性质都集中在系统的作用量中，而作用量的形式便于我们考察系统的对称性

### 约束

我对约束的理解其实就是含多个自由度及其相关导数的等式，它表述了方程中出现的自由度并非完全“自由”。

我们称下面仅包含$k$个独立自由度和$t$，而不包含相关导数的约束为**完整约束（holonomic constraint）**
$$
f(x_1,x_2,\cdot\cdot\cdot,x_k,t)=0\tag{1.1}
$$
而显然，每出现一个完整约束，就意味着原先指定的自由度中会出现一个“不必要”的自由度

对于不属于完整约束的约束统称为非完整约束，包括不等式，约束中出现时间的导数，且无法通过积分消去等情况

如果一系列约束方程中不显含时间，则称为**稳定约束（scleronomous constraint）**，否则称为**不稳定约束（rheonomous constraint）**

对于一个无约束的，总自由度为$3N$的系统，若引入$k$个完整约束，显然，其实际自由度变为$3N-k$，此时，我们原则上可以通过下面方式将自由度转为实际自由度
$$
\begin{aligned}
x_1&=x_1(q_1,q_2,\cdot\cdot\cdot,q_{3N-k},t)\\
x_2&=x_2(q_1,q_2,\cdot\cdot\cdot,q_{3N-k},t)\\
&\cdot\cdot\cdot\\
x_{3N}&=x_{3N}(q_1,q_2,\cdot\cdot\cdot,q_{3N-k},t)\\
\end{aligned}\tag{1.2}
$$

### 虚功原理和达朗贝尔原理

#### 虚功原理

考虑一个处于平衡状态，有约束的力学系统：
假定在某个时刻$t$，该力学系统发生了一个==与运动方程和约束条件兼容==的==虚拟位移$\delta x_i$==

> 🤔怎么表述呢，这里的虚拟位移应该是指所有粒子的空间位置发生的，并不是单指系统整体
>
> 而与约束条件兼容则是指：
>
> 不能作出明显违背约束条件的行为，如对于在曲面上的约束，粒子的虚位移不能使其脱离曲面或者导致粒子与曲面重叠，只能沿曲面切线

> 由于上面的原因，对于粒子系统的直接考虑显然极为复杂

考虑到系统整体处于力学平衡状态，每个质点均处于力学平衡状态，受到的力$F_i$为零，因此，必然有：
$$
\sum_{i}\boldsymbol{F_i} \cdot \delta \mathbf{x_i}\tag{1.3}
$$
而对于作用于粒子 $i$ 上的力 $F_i$ 可以分为主动力 $F_i^a$ （除去约束引起的力之外的所有力）和约束力 $F_i^c$ （完全由约束条件引起的力）之和：
$$
\sum_{i}\mathbf{F_i^a}\cdot\delta \mathbf{x_i} + \sum_{i}\mathbf{F_i^c}\cdot\delta \mathbf{x_i} = 0\tag{1.4}
$$
考虑粒子的虚位移只能沿着约束的切线方向，约束力做的功为零，因此我们得到：
$$
\sum_{i}\mathbf{F_i^a}\cdot\delta \mathbf{x_i} = 0\tag{1.5}
$$
即主动力做功为零，这就是静力学中的虚功原理。应用这个原理，我们可以避免对复杂的约束力进行考虑，而主动力若是能够通过场等方式描述，在某些情况下，就能极大的简化问题

#### 达朗贝尔原理

若考察的力学系统并不处于力学平衡，则可以将力学系统的运动方程 $\mathbf{F_i}=0$ 替换成牛顿方程 $\mathbf{F_i}-\mathbf{\dot p_i}=0$ 就能将虚功原理推广为
$$
\sum_{i}(\mathbf{F_i^a}-\mathbf{\dot p_i})\cdot\delta \mathbf{x_i} = 0\tag{1.6}
$$


### 欧拉-拉格朗日方程

达朗贝尔原理给出了普遍的运动方程，但 $\mathbf x_i$ 的分量之间并不能完全相互独立，求解过程还需要考虑约束的影响，因此，我们考虑选取数目等于系统独立自由度的相互独立的广义坐标 $q_i$ 来描绘粒子坐标
$$
\delta\mathbf{x_i} = \frac{\part \mathbf{x_i}}{\part q_j}\delta q_j\tag{1.7}
$$

> PS，这里使用了爱因斯坦求和规则，以后都默认使用这玩意了，怕第一次看看不懂所以特别注释一下

于是主动力的虚功变为：
$$
\sum_{i}\mathbf{F_i^a}\cdot\delta \mathbf{x_i} = \sum_{i}\mathbf{F_i^a} \cdot \frac{\part \mathbf{x_i}}{\part q_j}\delta q_j = Q_j\delta q_j = 0\tag{1.8}
$$
其中，我们定义广义力
$$
Q_j=\mathbf{F}_i^a \cdot \frac{\part \mathbf{x_i}}{\part q_j}\tag{1.9}
$$

> 🤔这玩意把不仅实现对力这个概念从普通的三维空间向广义空间的转化，而且实现了==标量化==

而达朗贝尔中的另一项涉及动量对时间的导数，我们也可以将其广义坐标化
$$
\mathbf{\dot p_i}\cdot\delta \mathbf{x_i}=m_i \mathbf{\ddot x_i}\cdot\frac{\part \mathbf{x_i}}{\part q_j}q_j\tag{1.10}
$$
此时，我们需要考虑将 $\mathbf{\ddot x_i}$ 用 $q_j$ 表示，注意到：
$$
m_i \mathbf{\ddot x_i}\cdot\frac{\part \mathbf{x_i}}{\part q_j} = \frac{d}{dt}\left( m_i \mathbf{\dot x_i}\cdot\frac{\part \mathbf{x_i}}{\part q_j} \right) - m_i\mathbf{\dot x_i} \cdot \frac{d}{dt}\left( \frac{\part \mathbf{x_i}}{\part q_j} \right)\tag{1.11}
$$

> PS，后一项由于 $t$ 与 $q_j$ 为独立变量，可以将 $d/dt$ 直接化到偏微分算符中，得到 $\part \mathbf{\dot x_i}/\part q_j$

考虑
$$
\mathbf{v_i} = \frac{d\mathbf{x_i}}{dt} = \frac{\part \mathbf{x_i}}{\part q_j}\dot q_j +\frac{\part \mathbf{x_i}}{\part t}\tag{1.12}
$$
因而得到
$$
\frac{\part \mathbf{v_i}}{\part \dot q_j} = \frac{\part \mathbf{x_i}}{\part q_j}\tag{1.13}
$$
将其带入到式 $(1.11)$ 中，并考虑达朗贝尔原理，我们能够得到
$$
\left[ \frac{d}{dt}\frac{\part T}{\part \dot q_j} - \frac{\part T}{\part q_j} - Q_j \right]\delta q_j = 0\tag{1.14}
$$
考虑 $\delta q_j$ 的独立性，要保证该式子成立，必须保证：
$$
\frac{d}{dt}\frac{\part T}{\part \dot q_j} - \frac{\part T}{\part q_j} = Q_j\tag{1.15}
$$
这就是欧拉-拉格朗日方程的一种形式

如果主动力是由一个==不依赖于速度==的势能 $V$ 给出的，即：

> PS，势能也隐含了不依赖于时间

$$
\mathbf{F_i^a} = -\frac{\part V}{\part \mathbf{x_i}}\tag{1.16}
$$

> 这里的含义是 $\mathbf{F_i^a}$ 的每一个分量是 $V$ 对相应的 $\mathbf{x_i}$ 的分量的偏微分

此时，我们可以将 $(1.15)$ 化为：
$$
\frac{d}{dt}\frac{\part L}{\part \dot q_j} - \frac{\part L}{\part q_j} = 0\tag{1.17}
$$
其中
$$
L=T-V\tag{1.18}
$$
称为拉格朗日量，因此，只要得到了系统的拉格朗日量，我们就能得出系统真实自由度的运动方程
